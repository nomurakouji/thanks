<%= stylesheet_link_tag 'sessions', media: 'all', 'data-turbolinks-track': 'reload' %>

<div class = "box">
  <div class = "box-inner">
    <h1>投稿する</h1>

    <%= form_with(model: @post, local: true) do |form| %>
      <% if @post.errors.any? %>
        <div id="error_explanation">
          <h2><%= @post.errors.count%> 件のエラーがあります。</h2>
          <ul>

            <% @post.errors.full_messages.each do |message| %>
              <li><%= message %></li>
            <% end %>
          </ul>
        </div>
      <% end %>

      <div class="field">
        <%= form.label :投稿者 %>
        <%= @post_name %>
      </div>

      <div class="field">
        <%= form.label :宛先 %>
        <%= form.collection_select :receiver_id,  User.where.not(id:current_user), :id, :name, include_blank: "選択して下さい" %>
      </div>

      <div class="field">
        <%= form.label :メッセージ %>
        <%= form.text_area :comment %>
      </div>

      <div class="actions">
        <% if @post.is_draft == true %>
          <%= form.submit "感謝を投稿", class: 'btn btn-outline-primary' %>
          <%= form.submit "下書きを更新", class: 'btn btn-outline-secondary' %>
        <% else %>
          <%= form.submit "感謝を更新",  class: 'btn btn-outline-primary'   %>
        <% end %>
      </div>
    <% end %>
    <br>
      <%= link_to '戻る', :back %>
  </div>
</div>
